[![npm version](https://badge.fury.io/js/%40novyk%2Fngxe.svg)](https://www.npmjs.com/@novyk/ngxe)
![CI](https://github.com/navix/ngxe/actions/workflows/ci.yml/badge.svg)

# ðŸ“œ ngxe (currently in BETA)

Angular 11.1+ JSON Translations Editor.

## Installation

```
$ npm i @novyk/ngxe@beta -D
```

## Usage

#### Create `ngxe.json` config file in the root:

```json
{
  "name": "Project Name",
  "input": "messages.json",
  "output": {
    "source": "messages.en.json",
    "translations": [
      {
        "locale": "de",
        "path": "messages.de.json"
      }
    ]
  }
}
```

* `input` - file generated by Angular, you can add it to `.gitignore`
* `output.source` - copy of the input file but ordered by keys (need for further transitions and smooth committing to Git).
* `output.translations` - target locales.

#### Extract translations from your project in JSON format:

```
$ ng xi18n --format=json
```

Editor works best if i18n messages have IDs:

```
<div i18n="@@MSG_ID">Message with ID</div>
...
$localize`:@@MSG_ID_2:Message with ID 2`;
```

#### Use ngxe:

```
$ npx ngxe
```

Browser should open the app (http://localhost:7600/ngxe/index.html).

Use the ngxe app to update messages and press `Save Project` (all `output` files will be updated).

#### Build your app

1. You can use the default flow with separated build for each lang.
2. **Or** import messages on the app bootstrapping in `main.ts`:

```
import { loadTranslations } from '@angular/localize';

...

loadMessages()
  .then(() => {
    platformBrowserDynamic().bootstrapModule(AppModule);
  })
  .catch(err => console.error(err));
  
async function loadMessages() {
  // Detect lang and compile proper path to messages here:
  const path = ...;
  const m = await import(path);
  loadTranslations(m.translations);
}
```

## Config

Interface of the `ngxe.json` file: [meta/config.ts](/projects/meta/config.ts)
